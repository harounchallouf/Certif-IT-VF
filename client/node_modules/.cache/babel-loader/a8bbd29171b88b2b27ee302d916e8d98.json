{"ast":null,"code":"import _objectSpread from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import'bootstrap/dist/css/bootstrap.min.css';import'./App.css';import React,{Component}from'react';import{Switch,Route,Redirect}from'react-router-dom';import{AnimatePresence}from'framer-motion';import AuthServices from'./../service/auth.service';import TeachersServices from'./../service/teachers.service';import UsersService from'../service/users.service';import Navigation from'./layout/navigation/Navigation';import Footer from'./layout/Footer/Footer';import Home from'./pages/Home/Home';import CoursesList from'./pages/Courses-list/Courses-list';import CourseDetails from'./pages/Course-details/Course-details';import NewCourseForm from'./pages/Course-form/New-Course-form';import EditCourseForm from'./pages/Course-form/Edit-Course-form';import Signup from'./pages/Signup/Signup';import UserProfile from'./pages/Profiles/UserProfile/UserProfile';import EditUserForm from'./pages/Profiles/UserProfile/EditUserForm';import TeachersList from'./pages/TeachersList/TeachersList';import TeacherProfile from'./pages/Profiles/TeacherProfile/TeacherProfile';import NewTeacherForm from'./pages/Profiles/TeacherProfile/Create-Teacher-form';import EditTeacherForm from'./pages/Profiles/TeacherProfile/Edit-Teacher-Form';import Alert from'./shared/Alert/Alert';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.componentDidMount=function(){return _this.refreshUser();};_this.refreshUser=function(){_this.authServices.isLoggedIn().then(function(response){return _this.setTheUser(response.data);}).catch(function(){return _this.setTheUser(undefined);});};_this.setTheUser=function(user){_this.setState({loggedInUser:user});user?_this.teachersServices.getTeacher(_this.state.loggedInUser._id).then(function(response){return _this.setState({teacher:response.data[0]});}).catch(function(){return _this.setState({teacher:undefined});}):_this.setState({teacher:undefined});};_this.handleToast=function(visible,text,color){return _this.setState({showToast:visible,toastText:text,toastColor:color});};_this.updateFavCourses=function(item_id){if(_this.state.loggedInUser){var newList=_toConsumableArray(_this.state.loggedInUser.favCourses).some(function(elm){return elm===item_id;})?_toConsumableArray(_this.state.loggedInUser.favCourses).filter(function(elm){return elm!==item_id;}):[].concat(_toConsumableArray(_this.state.loggedInUser.favCourses),[item_id]);_this.usersServices.updateFavCourses(_this.state.loggedInUser._id,newList).then(function(){return _this.refreshUser();}).catch(function(){return _this.handleToast(true,'An error has occurred, please try again later','#f8d7da');});}};_this.updateFavTeachers=function(item_id){if(_this.state.loggedInUser){var newList=_toConsumableArray(_this.state.loggedInUser.favTeachers).some(function(elm){return elm===item_id;})?_toConsumableArray(_this.state.loggedInUser.favTeachers).filter(function(elm){return elm!==item_id;}):[].concat(_toConsumableArray(_this.state.loggedInUser.favTeachers),[item_id]);_this.usersServices.updateFavTeachers(_this.state.loggedInUser._id,newList).then(function(){return _this.refreshUser();}).catch(function(){return _this.handleToast(true,'An error has occurred, please try again later','#f8d7da');});}};_this.state={loggedInUser:undefined,teacher:undefined,showToast:false,toastText:'',toastColor:''};_this.authServices=new AuthServices();_this.teachersServices=new TeachersServices();_this.usersServices=new UsersService();return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navigation,{storeUser:this.setTheUser,loggedUser:this.state.loggedInUser,handleToast:this.handleToast}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(AnimatePresence,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(props){return/*#__PURE__*/_jsx(Home,_objectSpread(_objectSpread({},props),{},{handleToast:_this2.handleToast}));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/courses\",render:function render(props){return/*#__PURE__*/_jsx(CoursesList,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,teacherInfo:_this2.state.teacher,updateFavCourses:_this2.updateFavCourses,handleToast:_this2.handleToast}));}}),/*#__PURE__*/_jsx(Route,{path:\"/courses/:course_id\",render:function render(props){return/*#__PURE__*/_jsx(CourseDetails,_objectSpread(_objectSpread({},props),{},{handleToast:_this2.handleToast,teacherInfo:_this2.state.teacher,loggedUser:_this2.state.loggedInUser}));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/teachers\",render:function render(props){return/*#__PURE__*/_jsx(TeachersList,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,teacherInfo:_this2.state.teacher,updateFavTeachers:_this2.updateFavTeachers,handleToast:_this2.handleToast}));}}),/*#__PURE__*/_jsx(Route,{path:\"/teachers/:teacher_id\",render:function render(props){return/*#__PURE__*/_jsx(TeacherProfile,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,teacherInfo:_this2.state.teacher,storeUser:_this2.setTheUser,updateFavCourses:_this2.updateFavCourses,handleToast:_this2.handleToast}));}}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",render:function render(props){return _this2.state.loggedInUser?/*#__PURE__*/_jsx(Redirect,{to:\"/courses\"}):/*#__PURE__*/_jsx(Signup,_objectSpread(_objectSpread({},props),{},{handleToast:_this2.handleToast,storeUser:_this2.setTheUser}));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/profile\",render:function render(props){return _this2.state.loggedInUser?/*#__PURE__*/_jsx(UserProfile,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,teacherInfo:_this2.state.teacher,storeUser:_this2.setTheUser,updateFavCourses:_this2.updateFavCourses,updateFavTeachers:_this2.updateFavTeachers,handleToast:_this2.handleToast})):/*#__PURE__*/_jsx(Redirect,{to:\"/signup\"});}}),/*#__PURE__*/_jsx(Route,{path:\"/profile/edit-user\",render:function render(props){return _this2.state.loggedInUser?/*#__PURE__*/_jsx(EditUserForm,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,storeUser:_this2.setTheUser,handleToast:_this2.handleToast})):/*#__PURE__*/_jsx(Redirect,{to:\"/signup\"});}}),/*#__PURE__*/_jsx(Route,{path:\"/profile/create-teacher\",render:function render(props){return _this2.state.loggedInUser?/*#__PURE__*/_jsx(NewTeacherForm,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,teacherInfo:_this2.state.teacher,storeUser:_this2.setTheUser,handleToast:_this2.handleToast})):/*#__PURE__*/_jsx(Redirect,{to:\"/signup\"});}}),/*#__PURE__*/_jsx(Route,{path:\"/profile-teacher/edit-teacher\",render:function render(props){return _this2.state.loggedInUser?/*#__PURE__*/_jsx(EditTeacherForm,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,teacherInfo:_this2.state.teacher,storeUser:_this2.setTheUser,handleToast:_this2.handleToast})):/*#__PURE__*/_jsx(Redirect,{to:\"/signup\"});}}),/*#__PURE__*/_jsx(Route,{path:\"/profile-teacher/create-course\",render:function render(props){return _this2.state.teacher?/*#__PURE__*/_jsx(NewCourseForm,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,teacherInfo:_this2.state.teacher,handleToast:_this2.handleToast})):/*#__PURE__*/_jsx(Redirect,{to:\"/signup\"});}}),/*#__PURE__*/_jsx(Route,{path:\"/profile-teacher/edit-course/:course_id\",render:function render(props){return _this2.state.teacher?/*#__PURE__*/_jsx(EditCourseForm,_objectSpread(_objectSpread({},props),{},{loggedUser:_this2.state.loggedInUser,teacherInfo:_this2.state.teacher,handleToast:_this2.handleToast})):/*#__PURE__*/_jsx(Redirect,{to:\"/signup\"});}})]})}),/*#__PURE__*/_jsx(Alert,{show:this.state.showToast,handleToast:this.handleToast,toastText:this.state.toastText,color:this.state.toastColor})]}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/project-3-master/client/src/components/App.js"],"names":["React","Component","Switch","Route","Redirect","AnimatePresence","AuthServices","TeachersServices","UsersService","Navigation","Footer","Home","CoursesList","CourseDetails","NewCourseForm","EditCourseForm","Signup","UserProfile","EditUserForm","TeachersList","TeacherProfile","NewTeacherForm","EditTeacherForm","Alert","App","componentDidMount","refreshUser","authServices","isLoggedIn","then","response","setTheUser","data","catch","undefined","user","setState","loggedInUser","teachersServices","getTeacher","state","_id","teacher","handleToast","visible","text","color","showToast","toastText","toastColor","updateFavCourses","item_id","newList","favCourses","some","elm","filter","usersServices","updateFavTeachers","favTeachers","props"],"mappings":"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","sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css'\nimport './App.css'\n\nimport React, { Component } from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport { AnimatePresence } from 'framer-motion'\nimport AuthServices from './../service/auth.service'\nimport TeachersServices from './../service/teachers.service'\nimport UsersService from '../service/users.service'\n\nimport Navigation from './layout/navigation/Navigation'\nimport Footer from './layout/Footer/Footer'\nimport Home from './pages/Home/Home'\n\nimport CoursesList from './pages/Courses-list/Courses-list'\nimport CourseDetails from './pages/Course-details/Course-details'\nimport NewCourseForm from './pages/Course-form/New-Course-form'\nimport EditCourseForm from './pages/Course-form/Edit-Course-form'\n\n\nimport Signup from './pages/Signup/Signup'\nimport UserProfile from './pages/Profiles/UserProfile/UserProfile'\nimport EditUserForm from './pages/Profiles/UserProfile/EditUserForm'\n\nimport TeachersList from './pages/TeachersList/TeachersList'\nimport TeacherProfile from './pages/Profiles/TeacherProfile/TeacherProfile'\nimport NewTeacherForm from './pages/Profiles/TeacherProfile/Create-Teacher-form'\nimport EditTeacherForm from './pages/Profiles/TeacherProfile/Edit-Teacher-Form'\n\nimport Alert from './shared/Alert/Alert'\n\nclass App extends Component {\n\n  constructor() {\n    super()\n    this.state = {\n      loggedInUser: undefined,\n      teacher: undefined,\n      showToast: false,\n      toastText: '',\n      toastColor: ''\n    }\n    this.authServices = new AuthServices()\n    this.teachersServices = new TeachersServices()\n    this.usersServices = new UsersService()\n\n  }\n\n  componentDidMount = () => this.refreshUser()\n\n  refreshUser = () => {\n    this.authServices\n      .isLoggedIn()\n      .then(response => this.setTheUser(response.data))\n      .catch(() => this.setTheUser(undefined))\n  }\n\n  setTheUser = user => {\n    this.setState({ loggedInUser: user })\n    user ?\n      this.teachersServices\n        .getTeacher(this.state.loggedInUser._id)\n        .then(response => this.setState({ teacher: response.data[0] }))\n        .catch(() => this.setState({ teacher: undefined }))\n      : this.setState({ teacher: undefined })\n  }\n\n  handleToast = (visible, text, color) => this.setState({ showToast: visible, toastText: text, toastColor: color })\n\n  updateFavCourses = item_id => {\n    if (this.state.loggedInUser) {\n      const newList = [...this.state.loggedInUser.favCourses].some(elm => elm === item_id) ? [...this.state.loggedInUser.favCourses].filter(elm => elm !== item_id) : [...this.state.loggedInUser.favCourses, item_id]\n      this.usersServices\n        .updateFavCourses(this.state.loggedInUser._id, newList)\n        .then(() => this.refreshUser())\n        .catch(() => this.handleToast(true, 'An error has occurred, please try again later', '#f8d7da'))\n    }\n  }\n\n  updateFavTeachers = item_id => {\n    if (this.state.loggedInUser) {\n      const newList = [...this.state.loggedInUser.favTeachers].some(elm => elm === item_id) ? [...this.state.loggedInUser.favTeachers].filter(elm => elm !== item_id) : [...this.state.loggedInUser.favTeachers, item_id]\n      this.usersServices\n        .updateFavTeachers(this.state.loggedInUser._id, newList)\n        .then(() => this.refreshUser())\n        .catch(() => this.handleToast(true, 'An error has occurred, please try again later', '#f8d7da'))\n    }\n  }\n\n\n  render() {\n    return (\n      <>\n        <Navigation storeUser={this.setTheUser} loggedUser={this.state.loggedInUser} handleToast={this.handleToast} />\n\n        <main>\n          <AnimatePresence>\n            <Switch>\n              <Route exact path=\"/\" render={props => <Home {...props} handleToast={this.handleToast} />} />\n              <Route exact path=\"/courses\" render={props => <CoursesList {...props} loggedUser={this.state.loggedInUser} teacherInfo={this.state.teacher} updateFavCourses={this.updateFavCourses} handleToast={this.handleToast} />} />\n              <Route path=\"/courses/:course_id\" render={props => <CourseDetails {...props} handleToast={this.handleToast} teacherInfo={this.state.teacher} loggedUser={this.state.loggedInUser} />} />\n              <Route exact path=\"/teachers\" render={props => <TeachersList {...props} loggedUser={this.state.loggedInUser} teacherInfo={this.state.teacher} updateFavTeachers={this.updateFavTeachers} handleToast={this.handleToast} />} />\n              <Route path=\"/teachers/:teacher_id\" render={props => <TeacherProfile {...props} loggedUser={this.state.loggedInUser} teacherInfo={this.state.teacher} storeUser={this.setTheUser} updateFavCourses={this.updateFavCourses} handleToast={this.handleToast} />} />\n              <Route path=\"/signup\" render={props => this.state.loggedInUser ? <Redirect to='/courses' /> : <Signup {...props} handleToast={this.handleToast} storeUser={this.setTheUser} />} />\n              <Route exact path=\"/profile\" render={props => this.state.loggedInUser ? <UserProfile {...props} loggedUser={this.state.loggedInUser} teacherInfo={this.state.teacher} storeUser={this.setTheUser} updateFavCourses={this.updateFavCourses} updateFavTeachers={this.updateFavTeachers} handleToast={this.handleToast} /> : <Redirect to='/signup' />} />\n              <Route path=\"/profile/edit-user\" render={props => this.state.loggedInUser ? <EditUserForm {...props} loggedUser={this.state.loggedInUser} storeUser={this.setTheUser} handleToast={this.handleToast} /> : <Redirect to='/signup' />} />\n              <Route path=\"/profile/create-teacher\" render={props => this.state.loggedInUser ? <NewTeacherForm {...props} loggedUser={this.state.loggedInUser} teacherInfo={this.state.teacher} storeUser={this.setTheUser} handleToast={this.handleToast} /> : <Redirect to='/signup' />} />\n              <Route path='/profile-teacher/edit-teacher' render={props => this.state.loggedInUser ? <EditTeacherForm {...props} loggedUser={this.state.loggedInUser} teacherInfo={this.state.teacher} storeUser={this.setTheUser} handleToast={this.handleToast} /> : <Redirect to='/signup' />} />\n              <Route path=\"/profile-teacher/create-course\" render={props => this.state.teacher ? <NewCourseForm {...props} loggedUser={this.state.loggedInUser} teacherInfo={this.state.teacher} handleToast={this.handleToast} /> : <Redirect to='/signup' />} />\n              <Route path=\"/profile-teacher/edit-course/:course_id\" render={props => this.state.teacher ? <EditCourseForm {...props} loggedUser={this.state.loggedInUser} teacherInfo={this.state.teacher} handleToast={this.handleToast} /> : <Redirect to='/signup' />} />\n            </Switch>\n          </AnimatePresence>\n          <Alert show={this.state.showToast} handleToast={this.handleToast} toastText={this.state.toastText} color={this.state.toastColor} />\n        </main>\n\n        <Footer />\n      </>\n    )\n  }\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}