{"ast":null,"code":"import _objectSpread from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{motion}from'framer-motion';import{Link}from'react-router-dom';import ReactPlayer from'react-player';import CoursesService from'./../../../service/courses.service';import CommentsService from'./../../../service/comments.service';import AddComments from'./../../shared/AddComments/AddComments';import Loader from'./../../shared/Spinner/Loader';import{Container,Row,Col,Card,Button,Image}from'react-bootstrap';import'./Course-details.css';var CourseDetails=/*#__PURE__*/function(_Component){_inherits(CourseDetails,_Component);var _super=_createSuper(CourseDetails);function CourseDetails(){var _this;_classCallCheck(this,CourseDetails);_this=_super.call(this);_this.componentDidMount=function(){return _this.refreshCourse();};_this.refreshCourse=function(){var course_id=_this.props.match.params.course_id;var getCourse=_this.coursesService.getCourse(course_id);var getComments=_this.commentsService.getCourseComments(course_id);Promise.all([getCourse,getComments]).then(function(res){return _this.setState({course:res[0].data,videoUrl:res[0].data.videos[0],comments:res[1].data});}).catch(function(){_this.props.history.push('/courses');_this.props.handleToast(true,'An error has occurred, please try again later','#f8d7da');});};_this.deleteComment=function(commentId){_this.commentsService.deleteComment(commentId).then(function(){_this.refreshCourse();_this.props.handleToast(true,'Delete successful!','#d4edda');}).catch(function(){_this.props.history.push('/courses');_this.props.handleToast(true,'An error has occurred while deleting, please try again later','#f8d7da');});};_this.toggleInput=function(){return _this.setState({showInput:!_this.state.showInput});};_this.setVideoUrl=function(url){return _this.setState({videoUrl:url});};_this.state={course:undefined,comments:undefined,videoUrl:undefined,showModal:false};_this.coursesService=new CoursesService();_this.commentsService=new CommentsService();return _this;}_createClass(CourseDetails,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:/*#__PURE__*/_jsx(Container,{className:\"course-details \",children:this.state.course?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"section\",{className:\"header\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:{span:8},children:[/*#__PURE__*/_jsx(\"h1\",{children:this.state.course.title}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"em\",{children:[\" \",this.state.course.lead]})}),this.state.course.owner&&/*#__PURE__*/_jsxs(\"p\",{style:{color:'#73726c',fontWeight:700},children:[\"Created by \",/*#__PURE__*/_jsxs(Link,{to:\"/teachers/\".concat(this.state.course.owner._id),children:[this.state.course.owner.name,\" \",this.state.course.owner.surname]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",this.state.course.category,\" | \",/*#__PURE__*/_jsx(\"strong\",{children:\"Difficulty Level:\"}),\"  \",this.state.course.difficultyLevel,\" | \",/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\"  \",this.state.course.price,\" \\u20AC | \",/*#__PURE__*/_jsx(\"strong\",{children:\"Duration:\"}),\"  \",this.state.course.duration,\" hrs.\"]})]}),/*#__PURE__*/_jsx(Col,{md:{span:4},children:/*#__PURE__*/_jsx(\"img\",{className:\"mb-3 course-img\",src:this.state.course.imageUrl,alt:this.state.course.title})})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"course-bckg\",children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5 mb-3\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:this.state.course.description}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5 mb-4\",children:\"What you will learn:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"whatYouWillLearn\",children:this.state.course.whatYouWillLearn.map(function(elm,idx){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://res.cloudinary.com/dodneiokm/image/upload/v1607883391/project3-ironhack/checked_ib75gx.png\",alt:\"Checked icon\"}),/*#__PURE__*/_jsx(\"p\",{children:elm})]},idx);})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 mb-4\",children:\"Requirements:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"requirements mb-4\",children:this.state.course.requirements.map(function(elm,idx){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://res.cloudinary.com/dodneiokm/image/upload/v1607887317/project3-ironhack/double-check_tm7qmy.png\",alt:\"Double-Checked icon\"}),/*#__PURE__*/_jsx(\"p\",{children:elm})]},idx);})}),this.props.loggedUser?/*#__PURE__*/_jsx(Button,{onClick:this.toggleInput,className:\"mt-3 mb-3 start-course\",children:this.state.showInput?'Close media':'See course media'}):/*#__PURE__*/_jsx(Button,{onClick:this.toggleInput,disabled:true,className:\"mt-3 mb-3 start-course\",children:\"Log In to see media\"}),this.state.showInput&&/*#__PURE__*/_jsx(motion.div,{transition:{type:'spring',stiffness:300,duration:1.2},children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:12,lg:8,children:/*#__PURE__*/_jsx(ReactPlayer,{width:\"100%\",url:this.state.videoUrl,controls:true})}),/*#__PURE__*/_jsx(Col,{md:12,lg:4,children:this.state.course.videos.map(function(elm,idx){return/*#__PURE__*/_jsxs(Card.Header,{className:\"video-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://res.cloudinary.com/dodneiokm/image/upload/v1607893554/project3-ironhack/play_u6mma0.png\",alt:\"play icon\",onClick:function onClick(){return _this2.setVideoUrl(elm);}}),/*#__PURE__*/_jsxs(\"p\",{style:{display:'inline-flex'},children:[\"Lesson \",idx+1]})]},elm._id);})})]})})]})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5 mb-3\",children:\"Comments\"}),this.state.comments.length>0?this.state.comments.map(function(elm){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({className:\"mb-2\"},elm),{},{children:elm.user&&/*#__PURE__*/_jsxs(\"div\",{className:\"comments-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-body\",style:{width:'90%'},children:[/*#__PURE__*/_jsx(Image,{className:\"avatar\",roundedCircle:true,src:elm.user.imageUrl,alt:elm.user.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-text\",style:{width:'80%'},children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[elm.user.username,\" \",elm.timestamps]})}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:/*#__PURE__*/_jsxs(\"em\",{children:[\"\\\" \",elm.content,\" \\\"\"]})}),/*#__PURE__*/_jsx(\"small\",{children:elm.createdAt})]})]}),_this2.props.loggedUser&&_this2.props.loggedUser._id===elm.user._id?/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return _this2.deleteComment(elm._id);},variant:\"outline-danger\",size:\"sm\",children:\"Delete\"}):null]})}),elm._id);}):/*#__PURE__*/_jsx(\"p\",{className:\"mb-3 ml-3\",children:\"No comments yet\"}),this.props.loggedUser&&/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(AddComments,{refreshCourse:this.refreshCourse,courseId:this.state.course._id,loggedUser:this.props.loggedUser,history:this.props.history,handleToast:this.props.handleToast})}),/*#__PURE__*/_jsx(Link,{to:\"/courses\",className:\"btn btn-sm btn-outline-dark mt-5\",children:\"Go back\"})]}):/*#__PURE__*/_jsx(Loader,{})})});}}]);return CourseDetails;}(Component);export default CourseDetails;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/project-3-master/client/src/components/pages/Course-details/Course-details.js"],"names":["React","Component","motion","Link","ReactPlayer","CoursesService","CommentsService","AddComments","Loader","Container","Row","Col","Card","Button","Image","CourseDetails","componentDidMount","refreshCourse","course_id","props","match","params","getCourse","coursesService","getComments","commentsService","getCourseComments","Promise","all","then","res","setState","course","data","videoUrl","videos","comments","catch","history","push","handleToast","deleteComment","commentId","toggleInput","showInput","state","setVideoUrl","url","undefined","showModal","opacity","span","title","lead","owner","color","fontWeight","_id","name","surname","category","difficultyLevel","price","duration","imageUrl","description","whatYouWillLearn","map","elm","idx","requirements","loggedUser","type","stiffness","display","length","user","width","username","timestamps","content","createdAt"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { motion } from 'framer-motion'\nimport { Link } from 'react-router-dom'\nimport ReactPlayer from 'react-player'\nimport CoursesService from './../../../service/courses.service'\nimport CommentsService from './../../../service/comments.service'\nimport AddComments from './../../shared/AddComments/AddComments'\nimport Loader from './../../shared/Spinner/Loader'\n\nimport { Container, Row, Col, Card, Button, Image } from 'react-bootstrap'\nimport './Course-details.css'\n\n\nclass CourseDetails extends Component {\n    constructor() {\n        super()\n        this.state = {\n            course: undefined,\n            comments: undefined,\n            videoUrl: undefined,\n            showModal: false\n        }\n        this.coursesService = new CoursesService()\n        this.commentsService = new CommentsService()\n    }\n\n    componentDidMount = () => this.refreshCourse()\n\n    refreshCourse = () => {\n        const course_id = this.props.match.params.course_id\n        const getCourse = this.coursesService.getCourse(course_id)\n        const getComments = this.commentsService.getCourseComments(course_id)\n\n        Promise.all([getCourse, getComments])\n            .then(res => this.setState({ course: res[0].data, videoUrl: res[0].data.videos[0], comments: res[1].data }))\n            .catch(() => {\n                this.props.history.push('/courses')\n                this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da')\n            })\n    }\n\n    deleteComment = commentId => {\n        this.commentsService\n            .deleteComment(commentId)\n            .then(() => {\n                this.refreshCourse()\n                this.props.handleToast(true, 'Delete successful!', '#d4edda')\n            })\n            .catch(() => {\n                this.props.history.push('/courses')\n                this.props.handleToast(true, 'An error has occurred while deleting, please try again later', '#f8d7da')\n            })\n    }\n\n    toggleInput = () => this.setState({ showInput: !this.state.showInput })\n\n    setVideoUrl = url => this.setState({ videoUrl: url })\n\n    render() {\n        return (\n            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\n\n                <Container className=\"course-details \">\n                    {this.state.course\n                        ?\n                        <>\n                            <section className=\"header\">\n                                <Row>\n                                    <Col md={{ span: 8 }} >\n                                        <h1>{this.state.course.title}</h1>\n                                        <p><em> {this.state.course.lead}</em></p>\n\n                                        {this.state.course.owner && <p style={{ color: '#73726c', fontWeight: 700 }}>Created by <Link to={`/teachers/${this.state.course.owner._id}`}>{this.state.course.owner.name} {this.state.course.owner.surname}</Link></p>}\n                                        <p><strong>Category:</strong> {this.state.course.category} | <strong>Difficulty Level:</strong>  {this.state.course.difficultyLevel} | <strong>Price:</strong>  {this.state.course.price} € | <strong>Duration:</strong>  {this.state.course.duration} hrs.</p>\n                                    </Col>\n                                    <Col md={{ span: 4 }} >\n                                        <img className=\"mb-3 course-img\" src={this.state.course.imageUrl} alt={this.state.course.title} />\n                                    </Col>\n                                </Row>\n                            </section>\n\n                            <section className=\"course-bckg\">\n                                <Row>\n                                    <Col>\n                                        <h3 className=\"mt-5 mb-3\">Description</h3>\n                                        <p>{this.state.course.description}</p>\n\n                                        <h3 className=\"mt-5 mb-4\">What you will learn:</h3>\n                                        <ul className=\"whatYouWillLearn\">\n                                            {this.state.course.whatYouWillLearn.map((elm, idx) => <li key={idx}><img src=\"https://res.cloudinary.com/dodneiokm/image/upload/v1607883391/project3-ironhack/checked_ib75gx.png\" alt='Checked icon' /><p>{elm}</p></li>)}\n                                        </ul>\n                                        <h3 className=\"mt-4 mb-4\">Requirements:</h3>\n                                        <ul className=\"requirements mb-4\">\n                                            {this.state.course.requirements.map((elm, idx) => <li key={idx}><img src=\"https://res.cloudinary.com/dodneiokm/image/upload/v1607887317/project3-ironhack/double-check_tm7qmy.png\" alt='Double-Checked icon' /><p>{elm}</p></li>)}\n                                        </ul>\n\n                                        {this.props.loggedUser ?\n                                            <Button onClick={this.toggleInput} className=\"mt-3 mb-3 start-course\" >{this.state.showInput ? 'Close media' : 'See course media'}</Button>\n                                            :\n                                            <Button onClick={this.toggleInput} disabled className=\"mt-3 mb-3 start-course\" >Log In to see media</Button>\n                                        }\n\n                                        {/* Videos */}\n                                        {this.state.showInput &&\n                                            <motion.div transition={{ type: 'spring', stiffness: 300, duration: 1.2 }}>\n                                                <Row>\n                                                    <Col md={12} lg={8}>\n                                                        <ReactPlayer\n                                                            width='100%'\n                                                            url={this.state.videoUrl}\n                                                            controls\n                                                        />\n                                                    </Col>\n\n                                                    <Col md={12} lg={4}>\n                                                        {this.state.course.videos.map((elm, idx) =>\n                                                            <Card.Header className=\"video-card\" key={elm._id}>\n                                                                <img\n                                                                    src=\"https://res.cloudinary.com/dodneiokm/image/upload/v1607893554/project3-ironhack/play_u6mma0.png\"\n                                                                    alt=\"play icon\"\n                                                                    onClick={() => this.setVideoUrl(elm)}\n                                                                />\n                                                                <p style={{ display: 'inline-flex' }} >Lesson {idx + 1}</p>\n                                                            </Card.Header>\n                                                        )}\n                                                    </Col>\n                                                </Row>\n                                            </motion.div>}\n\n                                    </Col>\n                                </Row>\n                            </section>\n\n\n                            {/* Comments */}\n\n                            <h3 className=\"mt-5 mb-3\">Comments</h3>\n\n                            {this.state.comments.length > 0 ?\n                                this.state.comments.map(elm =>\n                                    <div className=\"mb-2\" key={elm._id}{...elm}>\n                                        {elm.user &&\n                                            <div className=\"comments-card\">\n                                                <div className=\"comment-body\" style={{ width: '90%' }}>\n                                                    <Image className=\"avatar\" roundedCircle src={elm.user.imageUrl} alt={elm.user.username} />\n                                                    <div className=\"comment-text\" style={{ width: '80%' }}>\n                                                        <p className=\"mb-0\"><strong>{elm.user.username} {elm.timestamps}</strong></p>\n                                                        <p className=\"mb-0\"><em>\" {elm.content} \"</em></p>\n                                                        <small>{elm.createdAt}</small>\n                                                    </div>\n                                                </div>\n                                                {this.props.loggedUser && this.props.loggedUser._id === elm.user._id ?\n\n                                                    <Button onClick={() => this.deleteComment(elm._id)} variant=\"outline-danger\" size=\"sm\">Delete</Button>\n\n                                                    : null\n                                                }\n\n                                            </div>\n                                        }\n                                    </div>\n                                )\n                                : <p className=\"mb-3 ml-3\">No comments yet</p>\n                            }\n\n                            {this.props.loggedUser &&\n                                <section >\n                                    <AddComments refreshCourse={this.refreshCourse} courseId={this.state.course._id} loggedUser={this.props.loggedUser} history={this.props.history} handleToast={this.props.handleToast} />\n                                </section>\n                            }\n\n                            <Link to=\"/courses\" className=\"btn btn-sm btn-outline-dark mt-5\">Go back</Link>\n                        </>\n                        :\n                        <Loader />\n                    }\n                </Container>\n            </motion.div>\n        )\n    }\n}\n\nexport default CourseDetails\n\n\n"]},"metadata":{},"sourceType":"module"}