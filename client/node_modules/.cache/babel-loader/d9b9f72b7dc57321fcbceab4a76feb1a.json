{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\project-3-master\\\\client\\\\src\\\\components\\\\pages\\\\Profiles\\\\UserProfile\\\\UserProfile.js\";\nimport { Container, Image, Col, Row, Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport React, { Component } from 'react';\nimport { motion } from 'framer-motion';\nimport UsersServices from './../../../../service/users.service';\nimport CoursesServices from './../../../../service/courses.service';\nimport TeacherServices from './../../../../service/teachers.service';\nimport CourseCard from './../../../shared/CourseCard/Course-card';\nimport TeacherCard from './../../TeachersList/TeacherCard';\nimport Popup from '../../../shared/Popup/Popup';\nimport DeleteMessage from '../../../shared/Delete-message/DeleteMessage';\nimport TabNav from './../../../shared/TabsNav/TabNav';\nimport Tab from './../../../shared/TabsNav/Tab';\nimport './UserProfile.css';\n\nclass UserProfile extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      this.refreshCourses();\n      this.getFavsCourses();\n      this.getFavsTeachers();\n    };\n\n    this.setSelected = tab => this.setState({\n      selected: tab\n    });\n\n    this.refreshCourses = () => {\n      this.coursesServices.getRandomCourses().then(response => this.setState({\n        randomCourses: response.data\n      })).catch(() => {\n        // this.props.history.push('/')\n        this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da');\n      });\n\n      if (this.props.teacherInfo) {\n        this.coursesServices.getTeacherCourses(this.props.teacherInfo._id).then(response => this.setState({\n          teacherCourses: response.data\n        })).catch(() => {\n          // this.props.history.push('/')\n          this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da');\n        });\n      }\n    };\n\n    this.getFavsCourses = () => {\n      if (this.props.loggedUser.favCourses) {\n        this.usersServices.getUserFavCourses(this.props.loggedUser._id).then(response => this.setState({\n          favCourses: response.data\n        })).catch(() => {\n          this.props.history.push('/');\n          this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da');\n        });\n      }\n    };\n\n    this.getFavsTeachers = () => {\n      if (this.props.loggedUser.favTeachers) {\n        this.usersServices.getUserFavTeachers(this.props.loggedUser._id).then(response => this.setState({\n          favTeachers: response.data\n        })).catch(() => {\n          this.props.history.push('/');\n          this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da');\n        });\n      }\n    };\n\n    this.componentDidUpdate = currentProps => {\n      this.state.favCourses.length !== currentProps.loggedUser.favCourses.length && this.getFavsCourses();\n      this.state.favTeachers.length !== currentProps.loggedUser.favTeachers.length && this.getFavsTeachers();\n    };\n\n    this.deleteUser = () => {\n      this.usersServices.deleteUser(this.props.loggedUser._id).then(() => {\n        this.props.handleToast(true, 'User deleted', '#d4edda');\n        this.props.storeUser(undefined);\n        this.props.history.push('/');\n      }).catch(() => {\n        this.props.history.push('/');\n        this.props.handleToast(true, 'An error has occurred while deleting, please try again later', '#f8d7da');\n      });\n    };\n\n    this.handleModal = visible => this.setState({\n      showModal: visible\n    });\n\n    this.state = {\n      teacherCourses: undefined,\n      favCourses: [],\n      favTeachers: [],\n      learningActivity: [],\n      showModal: false,\n      selected: 'Favorite Courses',\n      randomCourses: []\n    };\n    this.usersServices = new UsersServices();\n    this.coursesServices = new CoursesServices();\n    this.teachersServices = new TeacherServices();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      exit: {\n        opacity: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(Popup, {\n        show: this.state.showModal,\n        handleModal: this.handleModal,\n        color: '#f8d7da',\n        children: [/*#__PURE__*/_jsxDEV(DeleteMessage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"justify-content-center\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: \"auto\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: () => this.handleModal(false),\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: \"auto\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              to: `/profile/delete-user/${this.props.loggedUser._id}`,\n              onClick: this.deleteUser,\n              variant: \"danger\",\n              children: \"Delete account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: \"user-profile\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"mt-5 mb-3\",\n          children: [\"Welcome back \", this.props.loggedUser.username, \" !\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"user-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"article\", {\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              src: this.props.loggedUser.imageUrl,\n              className: \"user-img\",\n              roundedCircle: true,\n              alt: this.props.loggedUser.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-fields\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Username:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 20\n                }, this), \" \", this.props.loggedUser.username]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Email:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 20\n                }, this), \" \", this.props.loggedUser.email]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Role:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 20\n                }, this), \" \", this.props.loggedUser.role]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/profile/edit-user\",\n              className: \"btn btn-info\",\n              children: \"Edit details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => this.handleModal(true),\n              className: \"btn btn-danger\",\n              children: \"Delete user\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this), this.props.loggedUser.role === 'Teacher' && this.props.teacherInfo ? /*#__PURE__*/_jsxDEV(Link, {\n              to: `/teachers/${this.props.teacherInfo._id}`,\n              className: \"btn btn-warning\",\n              children: \"Teacher profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this) : this.props.loggedUser.role === 'Teacher' && !this.props.teacherInfo ? /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/profile/create-teacher\",\n              className: \"btn btn-success\",\n              children: \"Create teacher profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 19\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mt-5 mb-3\",\n          children: \"Your activity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mt-5\",\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(TabNav, {\n              tabs: ['Favorite Courses', 'Favorite Teachers', 'Suggested Courses'],\n              selected: this.state.selected,\n              setSelected: this.setSelected,\n              children: [this.state.favCourses.length > 0 && /*#__PURE__*/_jsxDEV(Tab, {\n                isSelected: this.state.selected === 'Favorite Courses',\n                children: /*#__PURE__*/_jsxDEV(\"section\", {\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    children: this.state.favCourses.map(elm => /*#__PURE__*/_jsxDEV(CourseCard, { ...elm,\n                      userInfo: this.props.loggedUser,\n                      teacher: this.props.teacherInfo,\n                      updateFavCourses: this.props.updateFavCourses\n                    }, elm._id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 19\n              }, this), this.state.favTeachers.length > 0 && /*#__PURE__*/_jsxDEV(Tab, {\n                isSelected: this.state.selected === 'Favorite Teachers',\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  style: {\n                    width: '100 %'\n                  },\n                  children: this.state.favTeachers.map(elm => /*#__PURE__*/_jsxDEV(TeacherCard, { ...elm,\n                    userInfo: this.props.loggedUser,\n                    teacher: this.props.teacherInfo,\n                    updateFavTeachers: this.props.updateFavTeachers\n                  }, elm._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, this), this.state.randomCourses.length > 0 && /*#__PURE__*/_jsxDEV(Tab, {\n                isSelected: this.state.selected === 'Suggested Courses',\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: this.state.randomCourses.map(elm => /*#__PURE__*/_jsxDEV(CourseCard, { ...elm,\n                    userInfo: this.props.loggedUser,\n                    teacher: this.props.teacherInfo,\n                    updateFavCourses: this.props.updateFavCourses\n                  }, elm._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/courses\",\n          className: \"btn btn-outline-dark mt-5\",\n          children: \"Go back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default UserProfile;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/project-3-master/client/src/components/pages/Profiles/UserProfile/UserProfile.js"],"names":["Container","Image","Col","Row","Button","Link","React","Component","motion","UsersServices","CoursesServices","TeacherServices","CourseCard","TeacherCard","Popup","DeleteMessage","TabNav","Tab","UserProfile","constructor","componentDidMount","refreshCourses","getFavsCourses","getFavsTeachers","setSelected","tab","setState","selected","coursesServices","getRandomCourses","then","response","randomCourses","data","catch","props","handleToast","teacherInfo","getTeacherCourses","_id","teacherCourses","loggedUser","favCourses","usersServices","getUserFavCourses","history","push","favTeachers","getUserFavTeachers","componentDidUpdate","currentProps","state","length","deleteUser","storeUser","undefined","handleModal","visible","showModal","learningActivity","teachersServices","render","opacity","username","imageUrl","email","role","map","elm","updateFavCourses","width","updateFavTeachers"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,KAApB,EAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,MAArC,QAAmD,iBAAnD;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,eAAvB;AACA,OAAOC,aAAP,MAA0B,qCAA1B;AACA,OAAOC,eAAP,MAA4B,uCAA5B;AACA,OAAOC,eAAP,MAA4B,wCAA5B;AAEA,OAAOC,UAAP,MAAuB,0CAAvB;AACA,OAAOC,WAAP,MAAwB,kCAAxB;AACA,OAAOC,KAAP,MAAkB,6BAAlB;AACA,OAAOC,aAAP,MAA0B,8CAA1B;AACA,OAAOC,MAAP,MAAmB,kCAAnB;AACA,OAAOC,GAAP,MAAgB,+BAAhB;AAEA,OAAO,mBAAP;;AAEA,MAAMC,WAAN,SAA0BX,SAA1B,CAAoC;AAClCY,EAAAA,WAAW,GAAG;AACZ;;AADY,SAgBdC,iBAhBc,GAgBM,MAAM;AACxB,WAAKC,cAAL;AACA,WAAKC,cAAL;AACA,WAAKC,eAAL;AACD,KApBa;;AAAA,SAsBdC,WAtBc,GAsBAC,GAAG,IAAI,KAAKC,QAAL,CAAc;AAAEC,MAAAA,QAAQ,EAAEF;AAAZ,KAAd,CAtBP;;AAAA,SAwBdJ,cAxBc,GAwBG,MAAM;AACrB,WAAKO,eAAL,CACGC,gBADH,GAEGC,IAFH,CAEQC,QAAQ,IAAI,KAAKL,QAAL,CAAc;AAAEM,QAAAA,aAAa,EAAED,QAAQ,CAACE;AAA1B,OAAd,CAFpB,EAGGC,KAHH,CAGS,MAAM;AACX;AACA,aAAKC,KAAL,CAAWC,WAAX,CAAuB,IAAvB,EAA6B,+CAA7B,EAA8E,SAA9E;AACD,OANH;;AAQA,UAAI,KAAKD,KAAL,CAAWE,WAAf,EAA4B;AAC1B,aAAKT,eAAL,CACGU,iBADH,CACqB,KAAKH,KAAL,CAAWE,WAAX,CAAuBE,GAD5C,EAEGT,IAFH,CAEQC,QAAQ,IAAI,KAAKL,QAAL,CAAc;AAAEc,UAAAA,cAAc,EAAET,QAAQ,CAACE;AAA3B,SAAd,CAFpB,EAGGC,KAHH,CAGS,MAAM;AACX;AACA,eAAKC,KAAL,CAAWC,WAAX,CAAuB,IAAvB,EAA6B,+CAA7B,EAA8E,SAA9E;AACD,SANH;AAOD;AACF,KA1Ca;;AAAA,SA4Cdd,cA5Cc,GA4CG,MAAM;AACrB,UAAI,KAAKa,KAAL,CAAWM,UAAX,CAAsBC,UAA1B,EAAsC;AACpC,aAAKC,aAAL,CACGC,iBADH,CACqB,KAAKT,KAAL,CAAWM,UAAX,CAAsBF,GAD3C,EAEGT,IAFH,CAEQC,QAAQ,IAAI,KAAKL,QAAL,CAAc;AAAEgB,UAAAA,UAAU,EAAEX,QAAQ,CAACE;AAAvB,SAAd,CAFpB,EAGGC,KAHH,CAGS,MAAM;AACX,eAAKC,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACA,eAAKX,KAAL,CAAWC,WAAX,CAAuB,IAAvB,EAA6B,+CAA7B,EAA8E,SAA9E;AACD,SANH;AAOD;AACF,KAtDa;;AAAA,SAwDdb,eAxDc,GAwDI,MAAM;AACtB,UAAI,KAAKY,KAAL,CAAWM,UAAX,CAAsBM,WAA1B,EAAuC;AACrC,aAAKJ,aAAL,CACGK,kBADH,CACsB,KAAKb,KAAL,CAAWM,UAAX,CAAsBF,GAD5C,EAEGT,IAFH,CAEQC,QAAQ,IAAI,KAAKL,QAAL,CAAc;AAAEqB,UAAAA,WAAW,EAAEhB,QAAQ,CAACE;AAAxB,SAAd,CAFpB,EAGGC,KAHH,CAGS,MAAM;AACX,eAAKC,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACA,eAAKX,KAAL,CAAWC,WAAX,CAAuB,IAAvB,EAA6B,+CAA7B,EAA8E,SAA9E;AACD,SANH;AAOD;AACF,KAlEa;;AAAA,SAoEda,kBApEc,GAoEOC,YAAY,IAAI;AACnC,WAAKC,KAAL,CAAWT,UAAX,CAAsBU,MAAtB,KAAiCF,YAAY,CAACT,UAAb,CAAwBC,UAAxB,CAAmCU,MAApE,IAA8E,KAAK9B,cAAL,EAA9E;AACA,WAAK6B,KAAL,CAAWJ,WAAX,CAAuBK,MAAvB,KAAkCF,YAAY,CAACT,UAAb,CAAwBM,WAAxB,CAAoCK,MAAtE,IAAgF,KAAK7B,eAAL,EAAhF;AACD,KAvEa;;AAAA,SA0Ed8B,UA1Ec,GA0ED,MAAM;AACjB,WAAKV,aAAL,CACGU,UADH,CACc,KAAKlB,KAAL,CAAWM,UAAX,CAAsBF,GADpC,EAEGT,IAFH,CAEQ,MAAM;AACV,aAAKK,KAAL,CAAWC,WAAX,CAAuB,IAAvB,EAA6B,cAA7B,EAA6C,SAA7C;AACA,aAAKD,KAAL,CAAWmB,SAAX,CAAqBC,SAArB;AACA,aAAKpB,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,OANH,EAOGZ,KAPH,CAOS,MAAM;AACX,aAAKC,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACA,aAAKX,KAAL,CAAWC,WAAX,CAAuB,IAAvB,EAA6B,8DAA7B,EAA6F,SAA7F;AACD,OAVH;AAWD,KAtFa;;AAAA,SAwFdoB,WAxFc,GAwFAC,OAAO,IAAI,KAAK/B,QAAL,CAAc;AAAEgC,MAAAA,SAAS,EAAED;AAAb,KAAd,CAxFX;;AAEZ,SAAKN,KAAL,GAAa;AACXX,MAAAA,cAAc,EAAEe,SADL;AAEXb,MAAAA,UAAU,EAAE,EAFD;AAGXK,MAAAA,WAAW,EAAE,EAHF;AAIXY,MAAAA,gBAAgB,EAAE,EAJP;AAKXD,MAAAA,SAAS,EAAE,KALA;AAMX/B,MAAAA,QAAQ,EAAE,kBANC;AAOXK,MAAAA,aAAa,EAAE;AAPJ,KAAb;AASA,SAAKW,aAAL,GAAqB,IAAIlC,aAAJ,EAArB;AACA,SAAKmB,eAAL,GAAuB,IAAIlB,eAAJ,EAAvB;AACA,SAAKkD,gBAAL,GAAwB,IAAIjD,eAAJ,EAAxB;AACD;;AA4EDkD,EAAAA,MAAM,GAAG;AACP,wBACE,QAAC,MAAD,CAAQ,GAAR;AAAY,MAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAArB;AAAqC,MAAA,OAAO,EAAE;AAAEA,QAAAA,OAAO,EAAE;AAAX,OAA9C;AAA8D,MAAA,IAAI,EAAE;AAAEA,QAAAA,OAAO,EAAE;AAAX,OAApE;AAAA,8BAEE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAE,KAAKX,KAAL,CAAWO,SAAxB;AAAmC,QAAA,WAAW,EAAE,KAAKF,WAArD;AAAkE,QAAA,KAAK,EAAE,SAAzE;AAAA,gCACE,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,GAAD;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA,kCACE,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,MAAR;AAAA,mCACE,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,WAAhB;AAA4B,cAAA,OAAO,EAAE,MAAM,KAAKA,WAAL,CAAiB,KAAjB,CAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,MAAR;AAAA,mCACE,QAAC,MAAD;AAAQ,cAAA,EAAE,EAAG,wBAAuB,KAAKrB,KAAL,CAAWM,UAAX,CAAsBF,GAAI,EAA9D;AAAiE,cAAA,OAAO,EAAE,KAAKc,UAA/E;AAA2F,cAAA,OAAO,EAAC,QAAnG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAcE,QAAC,SAAD;AAAW,QAAA,SAAS,EAAC,cAArB;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,WAAd;AAAA,sCAAwC,KAAKlB,KAAL,CAAWM,UAAX,CAAsBsB,QAA9D;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE;AAAS,UAAA,SAAS,EAAC,cAAnB;AAAA,kCACE;AAAA,oCACE,QAAC,KAAD;AAAO,cAAA,GAAG,EAAE,KAAK5B,KAAL,CAAWM,UAAX,CAAsBuB,QAAlC;AAA4C,cAAA,SAAS,EAAC,UAAtD;AAAiE,cAAA,aAAa,MAA9E;AAA+E,cAAA,GAAG,EAAE,KAAK7B,KAAL,CAAWM,UAAX,CAAsBsB;AAA1G;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,sCACE;AAAA,wCAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAH,OAA+B,KAAK5B,KAAL,CAAWM,UAAX,CAAsBsB,QAArD;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAA,wCAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAH,OAA4B,KAAK5B,KAAL,CAAWM,UAAX,CAAsBwB,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,eAGE;AAAA,wCAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAH,OAA2B,KAAK9B,KAAL,CAAWM,UAAX,CAAsByB,IAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAUE;AAAK,YAAA,SAAS,EAAC,cAAf;AAAA,oCACE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,oBAAT;AAA8B,cAAA,SAAS,EAAC,cAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAE,MAAM,KAAKV,WAAL,CAAiB,IAAjB,CAAvB;AAA+C,cAAA,SAAS,EAAC,gBAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,EAIG,KAAKrB,KAAL,CAAWM,UAAX,CAAsByB,IAAtB,KAA+B,SAA/B,IAA4C,KAAK/B,KAAL,CAAWE,WAAvD,gBAEC,QAAC,IAAD;AAAM,cAAA,EAAE,EAAG,aAAY,KAAKF,KAAL,CAAWE,WAAX,CAAuBE,GAAI,EAAlD;AAAqD,cAAA,SAAS,EAAC,iBAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFD,GAGG,KAAKJ,KAAL,CAAWM,UAAX,CAAsByB,IAAtB,KAA+B,SAA/B,IAA4C,CAAC,KAAK/B,KAAL,CAAWE,WAAxD,gBACA,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,yBAAT;AAAmC,cAAA,SAAS,EAAC,iBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,GAEE,IATR;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,eA8BE;AAAI,UAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA9BF,eA+BE,QAAC,GAAD;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACE,QAAC,GAAD;AAAA,mCACE,QAAC,MAAD;AAAQ,cAAA,IAAI,EAAE,CAAC,kBAAD,EAAqB,mBAArB,EAA0C,mBAA1C,CAAd;AAA8E,cAAA,QAAQ,EAAE,KAAKc,KAAL,CAAWxB,QAAnG;AAA6G,cAAA,WAAW,EAAE,KAAKH,WAA/H;AAAA,yBACG,KAAK2B,KAAL,CAAWT,UAAX,CAAsBU,MAAtB,GAA+B,CAA/B,iBACC,QAAC,GAAD;AAAK,gBAAA,UAAU,EAAE,KAAKD,KAAL,CAAWxB,QAAX,KAAwB,kBAAzC;AAAA,uCACE;AAAA,yCACE,QAAC,GAAD;AAAA,8BAEI,KAAKwB,KAAL,CAAWT,UAAX,CAAsByB,GAAtB,CAA0BC,GAAG,iBAC3B,QAAC,UAAD,OAA8BA,GAA9B;AAAmC,sBAAA,QAAQ,EAAE,KAAKjC,KAAL,CAAWM,UAAxD;AAAoE,sBAAA,OAAO,EAAE,KAAKN,KAAL,CAAWE,WAAxF;AAAqG,sBAAA,gBAAgB,EAAE,KAAKF,KAAL,CAAWkC;AAAlI,uBAAiBD,GAAG,CAAC7B,GAArB;AAAA;AAAA;AAAA;AAAA,4BADF;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAFJ,EAcG,KAAKY,KAAL,CAAWJ,WAAX,CAAuBK,MAAvB,GAAgC,CAAhC,iBACC,QAAC,GAAD;AAAK,gBAAA,UAAU,EAAE,KAAKD,KAAL,CAAWxB,QAAX,KAAwB,mBAAzC;AAAA,uCACE,QAAC,GAAD;AAAK,kBAAA,KAAK,EAAE;AAAE2C,oBAAAA,KAAK,EAAE;AAAT,mBAAZ;AAAA,4BAEI,KAAKnB,KAAL,CAAWJ,WAAX,CAAuBoB,GAAvB,CAA2BC,GAAG,iBAC5B,QAAC,WAAD,OAA+BA,GAA/B;AAAoC,oBAAA,QAAQ,EAAE,KAAKjC,KAAL,CAAWM,UAAzD;AAAqE,oBAAA,OAAO,EAAE,KAAKN,KAAL,CAAWE,WAAzF;AAAsG,oBAAA,iBAAiB,EAAE,KAAKF,KAAL,CAAWoC;AAApI,qBAAkBH,GAAG,CAAC7B,GAAtB;AAAA;AAAA;AAAA;AAAA,0BADF;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAfJ,EAyBG,KAAKY,KAAL,CAAWnB,aAAX,CAAyBoB,MAAzB,GAAkC,CAAlC,iBACC,QAAC,GAAD;AAAK,gBAAA,UAAU,EAAE,KAAKD,KAAL,CAAWxB,QAAX,KAAwB,mBAAzC;AAAA,uCACE,QAAC,GAAD;AAAA,4BAEI,KAAKwB,KAAL,CAAWnB,aAAX,CAAyBmC,GAAzB,CAA6BC,GAAG,iBAC9B,QAAC,UAAD,OAA8BA,GAA9B;AAAmC,oBAAA,QAAQ,EAAE,KAAKjC,KAAL,CAAWM,UAAxD;AAAoE,oBAAA,OAAO,EAAE,KAAKN,KAAL,CAAWE,WAAxF;AAAqG,oBAAA,gBAAgB,EAAE,KAAKF,KAAL,CAAWkC;AAAlI,qBAAiBD,GAAG,CAAC7B,GAArB;AAAA;AAAA;AAAA;AAAA,0BADF;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA/BF,eAyEE,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,UAAT;AAAoB,UAAA,SAAS,EAAC,2BAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzEF;AAAA;AAAA;AAAA;AAAA;AAAA,cAdF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AA4FD;;AAxLiC;;AA4LpC,eAAerB,WAAf","sourcesContent":["import { Container, Image, Col, Row, Button } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport React, { Component } from 'react'\nimport { motion } from 'framer-motion'\nimport UsersServices from './../../../../service/users.service'\nimport CoursesServices from './../../../../service/courses.service'\nimport TeacherServices from './../../../../service/teachers.service'\n\nimport CourseCard from './../../../shared/CourseCard/Course-card'\nimport TeacherCard from './../../TeachersList/TeacherCard'\nimport Popup from '../../../shared/Popup/Popup'\nimport DeleteMessage from '../../../shared/Delete-message/DeleteMessage'\nimport TabNav from './../../../shared/TabsNav/TabNav'\nimport Tab from './../../../shared/TabsNav/Tab'\n\nimport './UserProfile.css'\n\nclass UserProfile extends Component {\n  constructor() {\n    super()\n    this.state = {\n      teacherCourses: undefined,\n      favCourses: [],\n      favTeachers: [],\n      learningActivity: [],\n      showModal: false,\n      selected: 'Favorite Courses',\n      randomCourses: []\n    }\n    this.usersServices = new UsersServices()\n    this.coursesServices = new CoursesServices()\n    this.teachersServices = new TeacherServices()\n  }\n\n  componentDidMount = () => {\n    this.refreshCourses()\n    this.getFavsCourses()\n    this.getFavsTeachers()\n  }\n\n  setSelected = tab => this.setState({ selected: tab })\n\n  refreshCourses = () => {\n    this.coursesServices\n      .getRandomCourses()\n      .then(response => this.setState({ randomCourses: response.data }))\n      .catch(() => {\n        // this.props.history.push('/')\n        this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da')\n      })\n\n    if (this.props.teacherInfo) {\n      this.coursesServices\n        .getTeacherCourses(this.props.teacherInfo._id)\n        .then(response => this.setState({ teacherCourses: response.data }))\n        .catch(() => {\n          // this.props.history.push('/')\n          this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da')\n        })\n    }\n  }\n\n  getFavsCourses = () => {\n    if (this.props.loggedUser.favCourses) {\n      this.usersServices\n        .getUserFavCourses(this.props.loggedUser._id)\n        .then(response => this.setState({ favCourses: response.data }))\n        .catch(() => {\n          this.props.history.push('/')\n          this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da')\n        })\n    }\n  }\n\n  getFavsTeachers = () => {\n    if (this.props.loggedUser.favTeachers) {\n      this.usersServices\n        .getUserFavTeachers(this.props.loggedUser._id)\n        .then(response => this.setState({ favTeachers: response.data }))\n        .catch(() => {\n          this.props.history.push('/')\n          this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da')\n        })\n    }\n  }\n\n  componentDidUpdate = currentProps => {\n    this.state.favCourses.length !== currentProps.loggedUser.favCourses.length && this.getFavsCourses()\n    this.state.favTeachers.length !== currentProps.loggedUser.favTeachers.length && this.getFavsTeachers()\n  }\n\n\n  deleteUser = () => {\n    this.usersServices\n      .deleteUser(this.props.loggedUser._id)\n      .then(() => {\n        this.props.handleToast(true, 'User deleted', '#d4edda')\n        this.props.storeUser(undefined)\n        this.props.history.push('/')\n      })\n      .catch(() => {\n        this.props.history.push('/')\n        this.props.handleToast(true, 'An error has occurred while deleting, please try again later', '#f8d7da')\n      })\n  }\n\n  handleModal = visible => this.setState({ showModal: visible })\n\n  render() {\n    return (\n      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\n\n        <Popup show={this.state.showModal} handleModal={this.handleModal} color={'#f8d7da'}>\n          <DeleteMessage />\n          <Row className='justify-content-center'>\n            <Col xs='auto'>\n              <Button variant='secondary' onClick={() => this.handleModal(false)}>Close</Button>\n            </Col>\n            <Col xs='auto'>\n              <Button to={`/profile/delete-user/${this.props.loggedUser._id}`} onClick={this.deleteUser} variant='danger'>Delete account</Button>\n            </Col>\n          </Row>\n        </Popup>\n\n        <Container className=\"user-profile\">\n          <h1 className=\"mt-5 mb-3\">Welcome back {this.props.loggedUser.username} !</h1>\n\n          {/* User details */}\n          <section className=\"user-details\">\n            <article>\n              <Image src={this.props.loggedUser.imageUrl} className=\"user-img\" roundedCircle alt={this.props.loggedUser.username} />\n              <div className=\"user-fields\">\n                <p><strong>Username:</strong> {this.props.loggedUser.username}</p>\n                <p><strong>Email:</strong> {this.props.loggedUser.email}</p>\n                <p><strong>Role:</strong> {this.props.loggedUser.role}</p>\n              </div>\n            </article>\n\n            <div className=\"user-buttons\">\n              <Link to='/profile/edit-user' className=\"btn btn-info\">Edit details</Link>\n              <Button onClick={() => this.handleModal(true)} className=\"btn btn-danger\">Delete user</Button>\n\n              {this.props.loggedUser.role === 'Teacher' && this.props.teacherInfo\n                ?\n                <Link to={`/teachers/${this.props.teacherInfo._id}`} className=\"btn btn-warning\">Teacher profile</Link>\n                : this.props.loggedUser.role === 'Teacher' && !this.props.teacherInfo ?\n                  <Link to='/profile/create-teacher' className=\"btn btn-success\">Create teacher profile</Link>\n                  : null\n              }\n            </div>\n          </section>\n\n\n          {/* Your activity*/}\n          <h2 className=\"mt-5 mb-3\">Your activity</h2>\n          <Row className=\"mt-5\">\n            <Col>\n              <TabNav tabs={['Favorite Courses', 'Favorite Teachers', 'Suggested Courses']} selected={this.state.selected} setSelected={this.setSelected}   >\n                {this.state.favCourses.length > 0 &&\n                  <Tab isSelected={this.state.selected === 'Favorite Courses'} >\n                    <section>\n                      <Row>\n                        {\n                          this.state.favCourses.map(elm =>\n                            <CourseCard key={elm._id} {...elm} userInfo={this.props.loggedUser} teacher={this.props.teacherInfo} updateFavCourses={this.props.updateFavCourses} />)\n                        }\n                      </Row>\n                    </section>\n                  </Tab>\n\n                }\n                {this.state.favTeachers.length > 0 &&\n                  <Tab isSelected={this.state.selected === 'Favorite Teachers'} >\n                    <Row style={{ width: '100 %' }}>\n                      {\n                        this.state.favTeachers.map(elm =>\n                          <TeacherCard key={elm._id} {...elm} userInfo={this.props.loggedUser} teacher={this.props.teacherInfo} updateFavTeachers={this.props.updateFavTeachers} />)\n                      }\n                    </Row>\n                  </Tab>\n\n                }\n                {this.state.randomCourses.length > 0 &&\n                  <Tab isSelected={this.state.selected === 'Suggested Courses'} >\n                    <Row>\n                      {\n                        this.state.randomCourses.map(elm =>\n                          <CourseCard key={elm._id} {...elm} userInfo={this.props.loggedUser} teacher={this.props.teacherInfo} updateFavCourses={this.props.updateFavCourses} />)\n                      }\n                    </Row>\n                  </Tab>\n\n                }\n              </TabNav>\n            </Col>\n          </Row>\n\n          <Link to=\"/courses\" className=\"btn btn-outline-dark mt-5\">Go back</Link>\n        </Container>\n      </motion.div >\n    )\n  }\n}\n\n\nexport default UserProfile"]},"metadata":{},"sourceType":"module"}