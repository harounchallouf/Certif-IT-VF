{"ast":null,"code":"import _defineProperty from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Lenovo/Desktop/project-3-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from'react';import{motion}from'framer-motion';import{pageVariants,pageTransition}from'../../../shared/PageAnimation/PageAnimation';import UsersService from'../../../../service/users.service';import FilesService from'../../../../service/upload.service';import Loader from'../../../shared/Spinner/Loader';import{Link}from'react-router-dom';import{Container,Row,Col,Form,Button}from'react-bootstrap';var EditUserForm=/*#__PURE__*/function(_Component){_inherits(EditUserForm,_Component);var _super=_createSuper(EditUserForm);function EditUserForm(){var _this;_classCallCheck(this,EditUserForm);_this=_super.call(this);_this.componentDidMount=function(){return _this.setState({user:_this.props.loggedUser});};_this.handleInputChange=function(e){return _this.setState({user:_objectSpread(_objectSpread({},_this.setState.user),{},_defineProperty({},e.target.name,e.target.value))});};_this.handleSubmit=function(e){e.preventDefault();_this.usersService.editUser(_this.props.loggedUser._id,_this.state.user).then(function(user){_this.props.storeUser(user.data);_this.props.history.push('/profile');_this.props.handleToast(true,'Edit successful!','#d4edda');}).catch(function(){_this.props.history.push('/profile');_this.props.handleToast(true,'An error has occurred, please try again later','#f8d7da');});};_this.handleImageUpload=function(e){var uploadData=new FormData();uploadData.append('imageUrl',e.target.files[0]);_this.setState({uploadingActive:true});_this.filesService.uploadImage(uploadData).then(function(response){_this.setState({user:_objectSpread(_objectSpread({},_this.state.user),{},{imageUrl:response.data.secure_url}),uploadingActive:false});}).catch(function(err){return _this.props.handleToast(true,err.response.data.message,'#f8d7da');});};_this.state={user:{username:'',email:'',password:'',role:''},uploadingActive:false};_this.usersService=new UsersService();_this.filesService=new FilesService();return _this;}_createClass(EditUserForm,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(motion.div,{initial:\"initial\",animate:\"in\",exit:\"out\",variants:pageVariants,transition:pageTransition,children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{lg:{span:6,offset:3},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Edit User Profile\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Form,{validated:this.validated,onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(Form.Row,{children:/*#__PURE__*/_jsxs(Form.Group,{as:Col,controlId:\"username\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",name:\"username\",value:this.state.user.username,onChange:this.handleInputChange})]})}),/*#__PURE__*/_jsxs(Form.Row,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,md:\"7\",controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"email\",name:\"email\",value:this.state.user.email,onChange:this.handleInputChange})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,md:\"5\",controlId:\"role\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Choose role\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",name:\"role\",value:this.state.user.role,onChange:this.handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Student or Teacher?\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Student\",children:\"Student\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Teacher\",children:\"Teacher\"})]})]})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\"Imagen (file: jpg or png) \",this.state.uploadingActive&&/*#__PURE__*/_jsx(Loader,{})]}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:this.handleImageUpload})]}),/*#__PURE__*/_jsx(Button,{className:\"mt-3 add-course\",type:\"submit\",disabled:this.state.uploadingActive,children:this.state.uploadingActive?'Image loading...':'Save changes'})]}),this.state.uploadingActive||/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"btn btn-outline-dark mt-5\",style:{marginBottom:'200px'},disabled:true,children:\"Go back\"})]})})})});}}]);return EditUserForm;}(Component);export default EditUserForm;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/project-3-master/client/src/components/pages/Profiles/UserProfile/EditUserForm.js"],"names":["React","Component","motion","pageVariants","pageTransition","UsersService","FilesService","Loader","Link","Container","Row","Col","Form","Button","EditUserForm","componentDidMount","setState","user","props","loggedUser","handleInputChange","e","target","name","value","handleSubmit","preventDefault","usersService","editUser","_id","state","then","storeUser","data","history","push","handleToast","catch","handleImageUpload","uploadData","FormData","append","files","uploadingActive","filesService","uploadImage","response","imageUrl","secure_url","err","message","username","email","password","role","span","offset","validated","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { motion } from 'framer-motion'\nimport { pageVariants, pageTransition } from '../../../shared/PageAnimation/PageAnimation'\nimport UsersService from '../../../../service/users.service'\nimport FilesService from '../../../../service/upload.service'\nimport Loader from '../../../shared/Spinner/Loader'\nimport { Link } from 'react-router-dom'\nimport { Container, Row, Col, Form, Button } from 'react-bootstrap'\n\n\n\nclass EditUserForm extends Component {\n    constructor() {\n        super()\n        this.state = {\n            user: {\n                username: '',\n                email: '',\n                password: '',\n                role: ''\n            },\n            uploadingActive: false\n        }\n        this.usersService = new UsersService()\n        this.filesService = new FilesService()\n    }\n\n    componentDidMount = () => this.setState({ user: this.props.loggedUser })\n\n    handleInputChange = e => this.setState({ user: { ...this.setState.user, [e.target.name]: e.target.value } })\n\n    handleSubmit = e => {\n        e.preventDefault()\n\n        this.usersService\n            .editUser(this.props.loggedUser._id, this.state.user)\n            .then(user => {\n                this.props.storeUser(user.data)\n                this.props.history.push('/profile')\n                this.props.handleToast(true, 'Edit successful!', '#d4edda')\n            })\n            .catch(() => {\n                this.props.history.push('/profile')\n                this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da')\n            })\n    }\n\n    handleImageUpload = e => {\n        const uploadData = new FormData()\n        uploadData.append('imageUrl', e.target.files[0])\n\n        this.setState({ uploadingActive: true })\n\n        this.filesService\n            .uploadImage(uploadData)\n            .then(response => {\n                this.setState({\n                    user: { ...this.state.user, imageUrl: response.data.secure_url },\n                    uploadingActive: false\n                })\n            })\n            .catch(err => this.props.handleToast(true, err.response.data.message, '#f8d7da'))\n    }\n\n    render() {\n        return (\n            <motion.div initial='initial' animate='in' exit='out' variants={pageVariants} transition={pageTransition}>\n\n                <Container>\n                    <Row>\n                        <Col lg={{ span: 6, offset: 3 }}>\n                            <h1 className=\"mt-5\">Edit User Profile</h1>\n                            <hr />\n\n                            <Form validated={this.validated} onSubmit={this.handleSubmit}>\n\n                                <Form.Row>\n                                    <Form.Group as={Col} controlId='username'>\n                                        <Form.Label>Username</Form.Label>\n                                        <Form.Control\n                                            required\n                                            type='text'\n                                            name='username'\n                                            value={this.state.user.username}\n                                            onChange={this.handleInputChange} />\n                                    </Form.Group>\n                                </Form.Row>\n\n                                <Form.Row>\n                                    <Form.Group as={Col} md='7' controlId='email'>\n                                        <Form.Label>Email address</Form.Label>\n                                        <Form.Control\n                                            required\n                                            type='email'\n                                            name='email'\n                                            value={this.state.user.email}\n                                            onChange={this.handleInputChange} />\n                                    </Form.Group>\n\n                                    <Form.Group as={Col} md='5' controlId='role'>\n                                        <Form.Label>Choose role</Form.Label>\n                                        <Form.Control as='select' name='role' value={this.state.user.role} onChange={this.handleInputChange}>\n                                            <option>Student or Teacher?</option>\n                                            <option value='Student' >Student</option>\n                                            <option value='Teacher' >Teacher</option>\n                                        </Form.Control>\n                                    </Form.Group>\n                                </Form.Row>\n\n                                <Form.Group className=\"mt-3\">\n                                    <Form.Label>Imagen (file: jpg or png) {this.state.uploadingActive && <Loader />}</Form.Label>\n                                    <Form.Control type=\"file\" onChange={this.handleImageUpload} />\n                                </Form.Group>\n\n                                <Button className=\"mt-3 add-course\" type='submit' disabled={this.state.uploadingActive}>{this.state.uploadingActive ? 'Image loading...' : 'Save changes'}</Button>\n                            </Form>\n                            {this.state.uploadingActive || <Link to='/profile' className=\"btn btn-outline-dark mt-5\" style={{ marginBottom: '200px'}} disabled>Go back</Link>}\n                        </Col>\n                    </Row>\n\n                </Container>\n            </motion.div>\n        )\n    }\n}\n\nexport default EditUserForm"]},"metadata":{},"sourceType":"module"}