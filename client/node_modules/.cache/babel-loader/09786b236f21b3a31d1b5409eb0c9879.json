{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\project 1\\\\client\\\\src\\\\components\\\\pages\\\\Course-details\\\\Course-details.js\";\nimport React, { Component } from 'react';\nimport { motion } from 'framer-motion';\nimport { Link } from 'react-router-dom';\nimport ReactPlayer from 'react-player';\nimport CoursesService from './../../../service/courses.service';\nimport CommentsService from './../../../service/comments.service';\nimport AddComments from './../../shared/AddComments/AddComments';\nimport Loader from './../../shared/Spinner/Loader';\nimport { Container, Row, Col, Card, Button, Image } from 'react-bootstrap';\nimport './Course-details.css';\n\nclass CourseDetails extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => this.refreshCourse();\n\n    this.refreshCourse = () => {\n      const course_id = this.props.match.params.course_id;\n      const getCourse = this.coursesService.getCourse(course_id);\n      const getComments = this.commentsService.getCourseComments(course_id);\n      Promise.all([getCourse, getComments]).then(res => this.setState({\n        course: res[0].data,\n        videoUrl: res[0].data.videos[0],\n        comments: res[1].data\n      })).catch(() => {\n        this.props.history.push('/courses');\n        this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da');\n      });\n    };\n\n    this.deleteComment = commentId => {\n      this.commentsService.deleteComment(commentId).then(() => {\n        this.refreshCourse();\n        this.props.handleToast(true, 'Delete successful!', '#d4edda');\n      }).catch(() => {\n        this.props.history.push('/courses');\n        this.props.handleToast(true, 'An error has occurred while deleting, please try again later', '#f8d7da');\n      });\n    };\n\n    this.toggleInput = () => this.setState({\n      showInput: !this.state.showInput\n    });\n\n    this.setVideoUrl = url => this.setState({\n      videoUrl: url\n    });\n\n    this.state = {\n      course: undefined,\n      comments: undefined,\n      videoUrl: undefined,\n      showModal: false\n    };\n    this.coursesService = new CoursesService();\n    this.commentsService = new CommentsService();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0\n      },\n      animate: {\n        opacity: 1\n      },\n      exit: {\n        opacity: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        className: \"course-details \",\n        children: this.state.course ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"header\",\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                md: {\n                  span: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: this.state.course.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"em\", {\n                    children: [\" \", this.state.course.lead]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 44\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 41\n                }, this), this.state.course.owner && /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#73726c',\n                    fontWeight: 700\n                  },\n                  children: [\"Created by \", /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/teachers/${this.state.course.owner._id}`,\n                    children: [this.state.course.owner.name, \" \", this.state.course.owner.surname]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 73,\n                    columnNumber: 129\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 69\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Category:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 44\n                  }, this), \" \", this.state.course.category, \" | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Difficulty Level:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 102\n                  }, this), \"  \", this.state.course.difficultyLevel, \" | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Price:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 176\n                  }, this), \"  \", this.state.course.price, \" \\u20AC | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Duration:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 231\n                  }, this), \"  \", this.state.course.duration, \" hrs.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                md: {\n                  span: 4\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"mb-3 course-img\",\n                  src: this.state.course.imageUrl,\n                  alt: this.state.course.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"course-bckg\",\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              children: /*#__PURE__*/_jsxDEV(Col, {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"mt-5 mb-3\",\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: this.state.course.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"mt-5 mb-4\",\n                  children: \"What you will learn:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"whatYouWillLearn\",\n                  children: this.state.course.whatYouWillLearn.map((elm, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"https://res.cloudinary.com/dodneiokm/image/upload/v1607883391/project3-ironhack/checked_ib75gx.png\",\n                      alt: \"Checked icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 90,\n                      columnNumber: 113\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: elm\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 90,\n                      columnNumber: 244\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 90,\n                    columnNumber: 99\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"mt-4 mb-4\",\n                  children: \"Requirements:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"requirements mb-4\",\n                  children: this.state.course.requirements.map((elm, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"https://res.cloudinary.com/dodneiokm/image/upload/v1607887317/project3-ironhack/double-check_tm7qmy.png\",\n                      alt: \"Double-Checked icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 109\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: elm\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 252\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 95\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 41\n                }, this), this.props.loggedUser ? /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: this.toggleInput,\n                  className: \"mt-3 mb-3 start-course\",\n                  children: this.state.showInput ? 'Close media' : 'See course media'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 45\n                }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: this.toggleInput,\n                  disabled: true,\n                  className: \"mt-3 mb-3 start-course\",\n                  children: \"Log In to see media\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 45\n                }, this), this.state.showInput && /*#__PURE__*/_jsxDEV(motion.div, {\n                  transition: {\n                    type: 'spring',\n                    stiffness: 300,\n                    duration: 1.2\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Row, {\n                    children: [/*#__PURE__*/_jsxDEV(Col, {\n                      md: 12,\n                      lg: 8,\n                      children: /*#__PURE__*/_jsxDEV(ReactPlayer, {\n                        width: \"100%\",\n                        url: this.state.videoUrl,\n                        controls: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 108,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 107,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(Col, {\n                      md: 12,\n                      lg: 4,\n                      children: this.state.course.videos.map((elm, idx) => /*#__PURE__*/_jsxDEV(Card.Header, {\n                        className: \"video-card\",\n                        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                          src: \"https://res.cloudinary.com/dodneiokm/image/upload/v1607893554/project3-ironhack/play_u6mma0.png\",\n                          alt: \"play icon\",\n                          onClick: () => this.setVideoUrl(elm)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 118,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          style: {\n                            display: 'inline-flex'\n                          },\n                          children: [\"Lesson \", idx + 1]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 123,\n                          columnNumber: 65\n                        }, this)]\n                      }, elm._id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 117,\n                        columnNumber: 61\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 115,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mt-5 mb-3\",\n            children: \"Comments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 29\n          }, this), this.state.comments.length > 0 ? this.state.comments.map(elm => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2\",\n            ...elm,\n            children: elm.user && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comments-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"comment-body\",\n                style: {\n                  width: '90%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Image, {\n                  className: \"avatar\",\n                  roundedCircle: true,\n                  src: elm.user.imageUrl,\n                  alt: elm.user.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"comment-text\",\n                  style: {\n                    width: '80%'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [elm.user.username, \" \", elm.timestamps]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 77\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"em\", {\n                      children: [\"\\\" \", elm.content, \" \\\"\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 77\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: elm.createdAt\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 49\n              }, this), this.props.loggedUser && this.props.loggedUser._id === elm.user._id ? /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => this.deleteComment(elm._id),\n                variant: \"outline-danger\",\n                size: \"sm\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 53\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 45\n            }, this)\n          }, elm._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 37\n          }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-3 ml-3\",\n            children: \"No comments yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 35\n          }, this), this.props.loggedUser && /*#__PURE__*/_jsxDEV(\"section\", {\n            children: /*#__PURE__*/_jsxDEV(AddComments, {\n              refreshCourse: this.refreshCourse,\n              courseId: this.state.course._id,\n              loggedUser: this.props.loggedUser,\n              history: this.props.history,\n              handleToast: this.props.handleToast\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/courses\",\n            className: \"btn btn-sm btn-outline-dark mt-5\",\n            children: \"Go back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default CourseDetails;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/project 1/client/src/components/pages/Course-details/Course-details.js"],"names":["React","Component","motion","Link","ReactPlayer","CoursesService","CommentsService","AddComments","Loader","Container","Row","Col","Card","Button","Image","CourseDetails","constructor","componentDidMount","refreshCourse","course_id","props","match","params","getCourse","coursesService","getComments","commentsService","getCourseComments","Promise","all","then","res","setState","course","data","videoUrl","videos","comments","catch","history","push","handleToast","deleteComment","commentId","toggleInput","showInput","state","setVideoUrl","url","undefined","showModal","render","opacity","span","title","lead","owner","color","fontWeight","_id","name","surname","category","difficultyLevel","price","duration","imageUrl","description","whatYouWillLearn","map","elm","idx","requirements","loggedUser","type","stiffness","display","length","user","width","username","timestamps","content","createdAt"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { motion } from 'framer-motion'\nimport { Link } from 'react-router-dom'\nimport ReactPlayer from 'react-player'\nimport CoursesService from './../../../service/courses.service'\nimport CommentsService from './../../../service/comments.service'\nimport AddComments from './../../shared/AddComments/AddComments'\nimport Loader from './../../shared/Spinner/Loader'\n\nimport { Container, Row, Col, Card, Button, Image } from 'react-bootstrap'\nimport './Course-details.css'\n\n\nclass CourseDetails extends Component {\n    constructor() {\n        super()\n        this.state = {\n            course: undefined,\n            comments: undefined,\n            videoUrl: undefined,\n            showModal: false\n        }\n        this.coursesService = new CoursesService()\n        this.commentsService = new CommentsService()\n    }\n\n    componentDidMount = () => this.refreshCourse()\n\n    refreshCourse = () => {\n        const course_id = this.props.match.params.course_id\n        const getCourse = this.coursesService.getCourse(course_id)\n        const getComments = this.commentsService.getCourseComments(course_id)\n\n        Promise.all([getCourse, getComments])\n            .then(res => this.setState({ course: res[0].data, videoUrl: res[0].data.videos[0], comments: res[1].data }))\n            .catch(() => {\n                this.props.history.push('/courses')\n                this.props.handleToast(true, 'An error has occurred, please try again later', '#f8d7da')\n            })\n    }\n\n    deleteComment = commentId => {\n        this.commentsService\n            .deleteComment(commentId)\n            .then(() => {\n                this.refreshCourse()\n                this.props.handleToast(true, 'Delete successful!', '#d4edda')\n            })\n            .catch(() => {\n                this.props.history.push('/courses')\n                this.props.handleToast(true, 'An error has occurred while deleting, please try again later', '#f8d7da')\n            })\n    }\n\n    toggleInput = () => this.setState({ showInput: !this.state.showInput })\n\n    setVideoUrl = url => this.setState({ videoUrl: url })\n\n    render() {\n        return (\n            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\n\n                <Container className=\"course-details \">\n                    {this.state.course\n                        ?\n                        <>\n                            <section className=\"header\">\n                                <Row>\n                                    <Col md={{ span: 8 }} >\n                                        <h1>{this.state.course.title}</h1>\n                                        <p><em> {this.state.course.lead}</em></p>\n\n                                        {this.state.course.owner && <p style={{ color: '#73726c', fontWeight: 700 }}>Created by <Link to={`/teachers/${this.state.course.owner._id}`}>{this.state.course.owner.name} {this.state.course.owner.surname}</Link></p>}\n                                        <p><strong>Category:</strong> {this.state.course.category} | <strong>Difficulty Level:</strong>  {this.state.course.difficultyLevel} | <strong>Price:</strong>  {this.state.course.price} € | <strong>Duration:</strong>  {this.state.course.duration} hrs.</p>\n                                    </Col>\n                                    <Col md={{ span: 4 }} >\n                                        <img className=\"mb-3 course-img\" src={this.state.course.imageUrl} alt={this.state.course.title} />\n                                    </Col>\n                                </Row>\n                            </section>\n\n                            <section className=\"course-bckg\">\n                                <Row>\n                                    <Col>\n                                        <h3 className=\"mt-5 mb-3\">Description</h3>\n                                        <p>{this.state.course.description}</p>\n\n                                        <h3 className=\"mt-5 mb-4\">What you will learn:</h3>\n                                        <ul className=\"whatYouWillLearn\">\n                                            {this.state.course.whatYouWillLearn.map((elm, idx) => <li key={idx}><img src=\"https://res.cloudinary.com/dodneiokm/image/upload/v1607883391/project3-ironhack/checked_ib75gx.png\" alt='Checked icon' /><p>{elm}</p></li>)}\n                                        </ul>\n                                        <h3 className=\"mt-4 mb-4\">Requirements:</h3>\n                                        <ul className=\"requirements mb-4\">\n                                            {this.state.course.requirements.map((elm, idx) => <li key={idx}><img src=\"https://res.cloudinary.com/dodneiokm/image/upload/v1607887317/project3-ironhack/double-check_tm7qmy.png\" alt='Double-Checked icon' /><p>{elm}</p></li>)}\n                                        </ul>\n\n                                        {this.props.loggedUser ?\n                                            <Button onClick={this.toggleInput} className=\"mt-3 mb-3 start-course\" >{this.state.showInput ? 'Close media' : 'See course media'}</Button>\n                                            :\n                                            <Button onClick={this.toggleInput} disabled className=\"mt-3 mb-3 start-course\" >Log In to see media</Button>\n                                        }\n\n                                        {/* Videos */}\n                                        {this.state.showInput &&\n                                            <motion.div transition={{ type: 'spring', stiffness: 300, duration: 1.2 }}>\n                                                <Row>\n                                                    <Col md={12} lg={8}>\n                                                        <ReactPlayer\n                                                            width='100%'\n                                                            url={this.state.videoUrl}\n                                                            controls\n                                                        />\n                                                    </Col>\n\n                                                    <Col md={12} lg={4}>\n                                                        {this.state.course.videos.map((elm, idx) =>\n                                                            <Card.Header className=\"video-card\" key={elm._id}>\n                                                                <img\n                                                                    src=\"https://res.cloudinary.com/dodneiokm/image/upload/v1607893554/project3-ironhack/play_u6mma0.png\"\n                                                                    alt=\"play icon\"\n                                                                    onClick={() => this.setVideoUrl(elm)}\n                                                                />\n                                                                <p style={{ display: 'inline-flex' }} >Lesson {idx + 1}</p>\n                                                            </Card.Header>\n                                                        )}\n                                                    </Col>\n                                                </Row>\n                                            </motion.div>}\n\n                                    </Col>\n                                </Row>\n                            </section>\n\n\n                            {/* Comments */}\n\n                            <h3 className=\"mt-5 mb-3\">Comments</h3>\n\n                            {this.state.comments.length > 0 ?\n                                this.state.comments.map(elm =>\n                                    <div className=\"mb-2\" key={elm._id}{...elm}>\n                                        {elm.user &&\n                                            <div className=\"comments-card\">\n                                                <div className=\"comment-body\" style={{ width: '90%' }}>\n                                                    <Image className=\"avatar\" roundedCircle src={elm.user.imageUrl} alt={elm.user.username} />\n                                                    <div className=\"comment-text\" style={{ width: '80%' }}>\n                                                        <p className=\"mb-0\"><strong>{elm.user.username} {elm.timestamps}</strong></p>\n                                                        <p className=\"mb-0\"><em>\" {elm.content} \"</em></p>\n                                                        <small>{elm.createdAt}</small>\n                                                    </div>\n                                                </div>\n                                                {this.props.loggedUser && this.props.loggedUser._id === elm.user._id ?\n\n                                                    <Button onClick={() => this.deleteComment(elm._id)} variant=\"outline-danger\" size=\"sm\">Delete</Button>\n\n                                                    : null\n                                                }\n\n                                            </div>\n                                        }\n                                    </div>\n                                )\n                                : <p className=\"mb-3 ml-3\">No comments yet</p>\n                            }\n\n                            {this.props.loggedUser &&\n                                <section >\n                                    <AddComments refreshCourse={this.refreshCourse} courseId={this.state.course._id} loggedUser={this.props.loggedUser} history={this.props.history} handleToast={this.props.handleToast} />\n                                </section>\n                            }\n\n                            <Link to=\"/courses\" className=\"btn btn-sm btn-outline-dark mt-5\">Go back</Link>\n                        </>\n                        :\n                        <Loader />\n                    }\n                </Container>\n            </motion.div>\n        )\n    }\n}\n\nexport default CourseDetails\n\n\n"]},"metadata":{},"sourceType":"module"}